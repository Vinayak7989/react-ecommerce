{"version":3,"file":"static/js/2.6a061737.chunk.js","mappings":"sPAEA,EADmB,CAAE,KAAQ,CAAE,IAAO,MAAO,MAAS,CAAE,QAAW,gBAAiB,UAAa,SAAW,SAAY,CAAC,CAAE,IAAO,OAAQ,MAAS,CAAE,EAAK,uVAA2V,KAAQ,OAAQ,MAAS,Y,WCM1gBA,EAAe,SAAsBC,EAAOC,GAC9C,OAAoBC,EAAAA,cAAoBC,EAAAA,GAAUC,EAAAA,EAAAA,IAAcA,EAAAA,EAAAA,GAAc,CAAC,EAAGJ,GAAQ,CAAC,EAAG,CAC5FC,IAAKA,EACLI,KAAMC,IAET,EAEDP,EAAaQ,YAAc,eAC3B,MAA4BL,EAAAA,WAAiBH,GCb7C,EADqB,CAAE,KAAQ,CAAE,IAAO,MAAO,MAAS,CAAE,QAAW,gBAAiB,UAAa,SAAW,SAAY,CAAC,CAAE,IAAO,OAAQ,MAAS,CAAE,EAAK,8cAAkd,KAAQ,SAAU,MAAS,YCMroBS,EAAiB,SAAwBR,EAAOC,GAClD,OAAoBC,EAAAA,cAAoBC,EAAAA,GAAUC,EAAAA,EAAAA,IAAcA,EAAAA,EAAAA,GAAc,CAAC,EAAGJ,GAAQ,CAAC,EAAG,CAC5FC,IAAKA,EACLI,KAAMI,IAET,EAEDD,EAAeD,YAAc,iBAC7B,MAA4BL,EAAAA,WAAiBM,G,4CCgK7C,EArKc,SAAC,GAAiB,IAAfE,EAAc,EAAdA,QACf,GAA0BC,EAAAA,EAAAA,UAAS,IAAnC,eAAOC,EAAP,KAAcC,EAAd,KACA,GAAgCF,EAAAA,EAAAA,UAAS,IAAzC,eAAOG,EAAP,KAAiBC,EAAjB,KACA,GAA8BJ,EAAAA,EAAAA,WAAS,GAAvC,eAAOK,EAAP,KAAgBC,EAAhB,KAEQC,GAASC,EAAAA,EAAAA,KAAY,SAACC,GAAD,iBAAiBA,EAAjB,IAArBF,MAERG,EAAAA,EAAAA,YAAU,WACOX,EAAQY,SAASF,OAI1BF,GAAQA,EAAKK,OAAOb,EAAQc,KAAK,IAExC,GAAE,CAACN,EAAMR,IAEV,IAAIe,GAAWC,EAAAA,EAAAA,MAETC,EAAoB,SAACC,GAEzB,IAAIC,EAAWnB,EAAQY,SAASF,MAC5BS,EACFnB,EAAQc,KAAKK,EAASC,MAEA,UAAlBF,EAAIG,KAAKC,KACXtB,EAAQc,KAAK,oBAEbd,EAAQc,KAAK,gBAGlB,EAEKS,EAAY,yCAAG,WAAOC,GAAP,uFACnBA,EAAEC,iBACFlB,GAAW,GAFQ,mBAKImB,EAAAA,EAAAA,IAA2BC,EAAAA,EAAMzB,EAAOE,GAL5C,cAKXwB,EALW,OAOTpB,EAASoB,EAATpB,KAPS,SAQWA,EAAKqB,mBARhB,OAQXC,EARW,QAUjBC,EAAAA,EAAAA,IAAmBD,EAAcjB,OAC9BmB,MAAK,SAACd,GACLH,EAAS,CACPkB,KAAM,iBACNC,QAAS,CACPC,KAAMjB,EAAIG,KAAKc,KACfjC,MAAOgB,EAAIG,KAAKnB,MAChBW,MAAOiB,EAAcjB,MACrBS,KAAMJ,EAAIG,KAAKC,KACfc,IAAKlB,EAAIG,KAAKe,OAGlBnB,EAAkBC,EACnB,IACAmB,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,EAArB,IAxBQ,kDA4BjBC,QAAQC,IAAR,MACAC,EAAAA,GAAAA,MAAY,KAAMC,SAClBnC,GAAW,GA9BM,0DAAH,sDAkCZoC,EAAW,yCAAG,oFAClBC,EAAAA,EAAAA,IAAgBjB,EAAAA,EAAMkB,EAAAA,GACnBb,KADH,yCACQ,WAAOJ,GAAP,qFACIpB,EAASoB,EAATpB,KADJ,SAEwBA,EAAKqB,mBAF7B,OAEEC,EAFF,QAGJC,EAAAA,EAAAA,IAAmBD,EAAcjB,OAC9BmB,MAAK,SAACd,GACLH,EAAS,CACPkB,KAAM,iBACNC,QAAS,CACPC,KAAMjB,EAAIG,KAAKc,KACfjC,MAAOgB,EAAIG,KAAKnB,MAChBW,MAAOiB,EAAcjB,MACrBS,KAAMJ,EAAIG,KAAKC,KACfc,IAAKlB,EAAIG,KAAKe,OAGlBnB,EAAkBC,EACnB,IACAmB,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,EAArB,IAjBL,2CADR,uDAqBGD,OAAM,SAACC,GACNC,QAAQC,IAAIF,GACZG,EAAAA,GAAAA,MAAYH,EAAII,QACjB,IAzBe,2CAAH,qDAmEjB,OACE,gBAAKI,UAAU,gBAAf,UACE,gBAAKA,UAAU,MAAf,UACE,iBAAKA,UAAU,uBAAf,UACGxC,GACC,eAAIwC,UAAU,cAAd,yBAEA,mCA7CR,kBAAMC,SAAUxB,EAAhB,WACE,gBAAKuB,UAAU,aAAf,UACE,kBACEb,KAAK,QACLa,UAAU,eACVE,MAAO9C,EACP+C,SAAU,SAACzB,GAAD,OAAOrB,EAASqB,EAAE0B,OAAOF,MAAzB,EACVG,YAAY,aACZC,WAAS,OAIb,gBAAKN,UAAU,aAAf,UACE,kBACEb,KAAK,WACLa,UAAU,eACVE,MAAO5C,EACP6C,SAAU,SAACzB,GAAD,OAAOnB,EAAYmB,EAAE0B,OAAOF,MAA5B,EACVG,YAAY,qBAIhB,mBACA,SAAC,IAAD,CACEE,QAAS9B,EACTU,KAAK,UACLa,UAAU,OACVQ,OAAK,EACLC,MAAM,QACN5D,MAAM,SAAC,EAAD,IACN6D,KAAK,QACLC,UAAWvD,GAASE,EAASsD,OAAS,EARxC,2CA0BI,SAAC,IAAD,CACEL,QAASV,EACTV,KAAK,SACLa,UAAU,OACVQ,OAAK,EACLC,MAAM,QACN5D,MAAM,SAAC,EAAD,IACN6D,KAAK,QAPP,gCAYA,SAAC,KAAD,CAAMG,GAAG,mBAAmBb,UAAU,0BAAtC,mCAOT,C,wHC5KGc,EAAiBpE,EAAAA,eAEd,SAASqE,EAAWC,GACzB,OAAOA,GAASA,EAAM7B,OAASzC,EAAAA,QAChC,CAQM,SAASuE,EAAaC,EAAS1E,GACpC,OARK,SAAwB0E,EAASC,EAAa3E,GACnD,OAAKsE,EAAeI,GAIAxE,EAAAA,aAAmBwE,EAA0B,oBAAV1E,EAAuBA,EAAM0E,EAAQ1E,OAAS,CAAC,GAAKA,GAHlG2E,CAIV,CAEQC,CAAeF,EAASA,EAAS1E,EACzC,C,sECdG6E,EAA2B3E,EAAAA,mBAAoB4E,GACxCC,EAAsB,SAA6BC,GAC5D,IAAIC,EAAWD,EAAKC,SAChBf,EAAOc,EAAKd,KAChB,OAAoBhE,EAAAA,cAAoB2E,EAAYK,SAAU,MAAM,SAAUC,GAC5E,OAAoBjF,EAAAA,cAAoB2E,EAAYO,SAAU,CAC5D1B,MAAOQ,GAAQiB,GACdF,EACJ,GACF,EACD,K,sECVe,SAASI,EAAKC,EAAKC,GAChC,IAAIC,GAAQpF,EAAAA,EAAAA,GAAc,CAAC,EAAGkF,GAQ9B,OANIG,MAAMC,QAAQH,IAChBA,EAAOI,SAAQ,SAAUC,UAChBJ,EAAMI,EACd,IAGIJ,CACR,C","sources":["../node_modules/@ant-design/icons-svg/es/asn/MailOutlined.js","../node_modules/@ant-design/icons/es/icons/MailOutlined.js","../node_modules/@ant-design/icons-svg/es/asn/GoogleOutlined.js","../node_modules/@ant-design/icons/es/icons/GoogleOutlined.js","pages/auth/Login.js","../node_modules/antd/es/_util/reactNode.js","../node_modules/antd/es/config-provider/SizeContext.js","../node_modules/rc-util/es/omit.js"],"sourcesContent":["// This icon file is generated automatically.\nvar MailOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z\" } }] }, \"name\": \"mail\", \"theme\": \"outlined\" };\nexport default MailOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport MailOutlinedSvg from \"@ant-design/icons-svg/es/asn/MailOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar MailOutlined = function MailOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: MailOutlinedSvg\n  }));\n};\n\nMailOutlined.displayName = 'MailOutlined';\nexport default /*#__PURE__*/React.forwardRef(MailOutlined);","// This icon file is generated automatically.\nvar GoogleOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M881 442.4H519.7v148.5h206.4c-8.9 48-35.9 88.6-76.6 115.8-34.4 23-78.3 36.6-129.9 36.6-99.9 0-184.4-67.5-214.6-158.2-7.6-23-12-47.6-12-72.9s4.4-49.9 12-72.9c30.3-90.6 114.8-158.1 214.7-158.1 56.3 0 106.8 19.4 146.6 57.4l110-110.1c-66.5-62-153.2-100-256.6-100-149.9 0-279.6 86-342.7 211.4-26 51.8-40.8 110.4-40.8 172.4S151 632.8 177 684.6C240.1 810 369.8 896 519.7 896c103.6 0 190.4-34.4 253.8-93 72.5-66.8 114.4-165.2 114.4-282.1 0-27.2-2.4-53.3-6.9-78.5z\" } }] }, \"name\": \"google\", \"theme\": \"outlined\" };\nexport default GoogleOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport GoogleOutlinedSvg from \"@ant-design/icons-svg/es/asn/GoogleOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar GoogleOutlined = function GoogleOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: GoogleOutlinedSvg\n  }));\n};\n\nGoogleOutlined.displayName = 'GoogleOutlined';\nexport default /*#__PURE__*/React.forwardRef(GoogleOutlined);","import React, { useState, useEffect } from \"react\";\nimport { signInWithPopup, signInWithEmailAndPassword } from \"firebase/auth\";\nimport { auth, googleAuthProvider } from \"../../firebase\";\nimport { toast } from \"react-toastify\";\nimport { Button } from \"antd\";\nimport { MailOutlined, GoogleOutlined } from \"@ant-design/icons\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { createOrUpdateUser } from \"../../functions/auth\";\n\nconst Login = ({ history }) => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const { user } = useSelector((state) => ({ ...state }));\n\n  useEffect(() => {\n    let intended = history.location.state;\n    if (intended) {\n      return;\n    } else {\n      if (user && user.token) history.push(\"/\");\n    }\n  }, [user, history]);\n\n  let dispatch = useDispatch();\n\n  const roleBasedRedirect = (res) => {\n    // check if intended\n    let intended = history.location.state;\n    if (intended) {\n      history.push(intended.from);\n    } else {\n      if (res.data.role === \"admin\") {\n        history.push(\"/admin/dashboard\");\n      } else {\n        history.push(\"/user/history\");\n      }\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    // console.table(email, password);\n    try {\n      const result = await signInWithEmailAndPassword(auth, email, password);\n      // console.log(result);\n      const { user } = result;\n      const idTokenResult = await user.getIdTokenResult();\n\n      createOrUpdateUser(idTokenResult.token)\n        .then((res) => {\n          dispatch({\n            type: \"LOGGED_IN_USER\",\n            payload: {\n              name: res.data.name,\n              email: res.data.email,\n              token: idTokenResult.token,\n              role: res.data.role,\n              _id: res.data._id,\n            },\n          });\n          roleBasedRedirect(res);\n        })\n        .catch((err) => console.log(err));\n\n      // history.push(\"/\");\n    } catch (error) {\n      console.log(error);\n      toast.error(error.message);\n      setLoading(false);\n    }\n  };\n\n  const googleLogin = async () => {\n    signInWithPopup(auth, googleAuthProvider)\n      .then(async (result) => {\n        const { user } = result;\n        const idTokenResult = await user.getIdTokenResult();\n        createOrUpdateUser(idTokenResult.token)\n          .then((res) => {\n            dispatch({\n              type: \"LOGGED_IN_USER\",\n              payload: {\n                name: res.data.name,\n                email: res.data.email,\n                token: idTokenResult.token,\n                role: res.data.role,\n                _id: res.data._id,\n              },\n            });\n            roleBasedRedirect(res);\n          })\n          .catch((err) => console.log(err));\n        // history.push(\"/\");\n      })\n      .catch((err) => {\n        console.log(err);\n        toast.error(err.message);\n      });\n  };\n\n  const loginForm = () => (\n    <form onSubmit={handleSubmit}>\n      <div className=\"form-group\">\n        <input\n          type=\"email\"\n          className=\"form-control\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          placeholder=\"Your email\"\n          autoFocus\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <input\n          type=\"password\"\n          className=\"form-control\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          placeholder=\"Your password\"\n        />\n      </div>\n\n      <br />\n      <Button\n        onClick={handleSubmit}\n        type=\"primary\"\n        className=\"mb-3\"\n        block\n        shape=\"round\"\n        icon={<MailOutlined />}\n        size=\"large\"\n        disabled={!email || password.length < 6}\n      >\n        Login with Email/Password\n      </Button>\n    </form>\n  );\n\n  return (\n    <div className=\"container p-5\">\n      <div className=\"row\">\n        <div className=\"col-md-6 offset-md-3\">\n          {loading ? (\n            <h4 className=\"text-danger\">Loading...</h4>\n          ) : (\n            <h4>Login</h4>\n          )}\n          {loginForm()}\n\n          <Button\n            onClick={googleLogin}\n            type=\"danger\"\n            className=\"mb-3\"\n            block\n            shape=\"round\"\n            icon={<GoogleOutlined />}\n            size=\"large\"\n          >\n            Login with Google\n          </Button>\n\n          <Link to=\"/forgot/password\" className=\"float-right text-danger\">\n            Forgot Password\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n","import * as React from 'react';\nvar isValidElement = React.isValidElement;\nexport { isValidElement };\nexport function isFragment(child) {\n  return child && child.type === React.Fragment;\n}\nexport function replaceElement(element, replacement, props) {\n  if (!isValidElement(element)) {\n    return replacement;\n  }\n\n  return /*#__PURE__*/React.cloneElement(element, typeof props === 'function' ? props(element.props || {}) : props);\n}\nexport function cloneElement(element, props) {\n  return replaceElement(element, element, props);\n}","import * as React from 'react';\nvar SizeContext = /*#__PURE__*/React.createContext(undefined);\nexport var SizeContextProvider = function SizeContextProvider(_ref) {\n  var children = _ref.children,\n      size = _ref.size;\n  return /*#__PURE__*/React.createElement(SizeContext.Consumer, null, function (originSize) {\n    return /*#__PURE__*/React.createElement(SizeContext.Provider, {\n      value: size || originSize\n    }, children);\n  });\n};\nexport default SizeContext;","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nexport default function omit(obj, fields) {\n  var clone = _objectSpread({}, obj);\n\n  if (Array.isArray(fields)) {\n    fields.forEach(function (key) {\n      delete clone[key];\n    });\n  }\n\n  return clone;\n}"],"names":["MailOutlined","props","ref","React","AntdIcon","_objectSpread","icon","MailOutlinedSvg","displayName","GoogleOutlined","GoogleOutlinedSvg","history","useState","email","setEmail","password","setPassword","loading","setLoading","user","useSelector","state","useEffect","location","token","push","dispatch","useDispatch","roleBasedRedirect","res","intended","from","data","role","handleSubmit","e","preventDefault","signInWithEmailAndPassword","auth","result","getIdTokenResult","idTokenResult","createOrUpdateUser","then","type","payload","name","_id","catch","err","console","log","toast","message","googleLogin","signInWithPopup","googleAuthProvider","className","onSubmit","value","onChange","target","placeholder","autoFocus","onClick","block","shape","size","disabled","length","to","isValidElement","isFragment","child","cloneElement","element","replacement","replaceElement","SizeContext","undefined","SizeContextProvider","_ref","children","Consumer","originSize","Provider","omit","obj","fields","clone","Array","isArray","forEach","key"],"sourceRoot":""}