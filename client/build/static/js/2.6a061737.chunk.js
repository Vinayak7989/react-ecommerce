"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[2],{51249:function(e,n,t){t.r(n),t.d(n,{default:function(){return j}});var r=t(74165),a=t(15861),o=t(1413),c=t(29439),s=t(72791),i=t(99243),u=t(63108),l=t(9085),d=t(87309),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"},m=t(54291),h=function(e,n){return s.createElement(m.Z,(0,o.Z)((0,o.Z)({},e),{},{ref:n,icon:f}))};h.displayName="MailOutlined";var p=s.forwardRef(h),v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M881 442.4H519.7v148.5h206.4c-8.9 48-35.9 88.6-76.6 115.8-34.4 23-78.3 36.6-129.9 36.6-99.9 0-184.4-67.5-214.6-158.2-7.6-23-12-47.6-12-72.9s4.4-49.9 12-72.9c30.3-90.6 114.8-158.1 214.7-158.1 56.3 0 106.8 19.4 146.6 57.4l110-110.1c-66.5-62-153.2-100-256.6-100-149.9 0-279.6 86-342.7 211.4-26 51.8-40.8 110.4-40.8 172.4S151 632.8 177 684.6C240.1 810 369.8 896 519.7 896c103.6 0 190.4-34.4 253.8-93 72.5-66.8 114.4-165.2 114.4-282.1 0-27.2-2.4-53.3-6.9-78.5z"}}]},name:"google",theme:"outlined"},g=function(e,n){return s.createElement(m.Z,(0,o.Z)((0,o.Z)({},e),{},{ref:n,icon:v}))};g.displayName="GoogleOutlined";var x=s.forwardRef(g),Z=t(59434),k=t(91523),w=t(26958),y=t(80184),j=function(e){var n=e.history,t=(0,s.useState)(""),f=(0,c.Z)(t,2),m=f[0],h=f[1],v=(0,s.useState)(""),g=(0,c.Z)(v,2),j=g[0],N=g[1],b=(0,s.useState)(!1),E=(0,c.Z)(b,2),C=E[0],L=E[1],_=(0,Z.v9)((function(e){return(0,o.Z)({},e)})).user;(0,s.useEffect)((function(){n.location.state||_&&_.token&&n.push("/")}),[_,n]);var z=(0,Z.I0)(),I=function(e){var t=n.location.state;t?n.push(t.from):"admin"===e.data.role?n.push("/admin/dashboard"):n.push("/user/history")},S=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t,a,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),L(!0),e.prev=2,e.next=5,(0,i.e5)(u.I,m,j);case 5:return t=e.sent,a=t.user,e.next=9,a.getIdTokenResult();case 9:o=e.sent,(0,w.XB)(o.token).then((function(e){z({type:"LOGGED_IN_USER",payload:{name:e.data.name,email:e.data.email,token:o.token,role:e.data.role,_id:e.data._id}}),I(e)})).catch((function(e){return console.log(e)})),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0),l.Am.error(e.t0.message),L(!1);case 18:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(n){return e.apply(this,arguments)}}(),G=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,i.rh)(u.I,u.q).then(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.user,e.next=3,t.getIdTokenResult();case 3:a=e.sent,(0,w.XB)(a.token).then((function(e){z({type:"LOGGED_IN_USER",payload:{name:e.data.name,email:e.data.email,token:a.token,role:e.data.role,_id:e.data._id}}),I(e)})).catch((function(e){return console.log(e)}));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),l.Am.error(e.message)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,y.jsx)("div",{className:"container p-5",children:(0,y.jsx)("div",{className:"row",children:(0,y.jsxs)("div",{className:"col-md-6 offset-md-3",children:[C?(0,y.jsx)("h4",{className:"text-danger",children:"Loading..."}):(0,y.jsx)("h4",{children:"Login"}),(0,y.jsxs)("form",{onSubmit:S,children:[(0,y.jsx)("div",{className:"form-group",children:(0,y.jsx)("input",{type:"email",className:"form-control",value:m,onChange:function(e){return h(e.target.value)},placeholder:"Your email",autoFocus:!0})}),(0,y.jsx)("div",{className:"form-group",children:(0,y.jsx)("input",{type:"password",className:"form-control",value:j,onChange:function(e){return N(e.target.value)},placeholder:"Your password"})}),(0,y.jsx)("br",{}),(0,y.jsx)(d.Z,{onClick:S,type:"primary",className:"mb-3",block:!0,shape:"round",icon:(0,y.jsx)(p,{}),size:"large",disabled:!m||j.length<6,children:"Login with Email/Password"})]}),(0,y.jsx)(d.Z,{onClick:G,type:"danger",className:"mb-3",block:!0,shape:"round",icon:(0,y.jsx)(x,{}),size:"large",children:"Login with Google"}),(0,y.jsx)(k.rU,{to:"/forgot/password",className:"float-right text-danger",children:"Forgot Password"})]})})})}},61113:function(e,n,t){t.d(n,{M2:function(){return o},Tm:function(){return c},l$:function(){return a}});var r=t(72791),a=r.isValidElement;function o(e){return e&&e.type===r.Fragment}function c(e,n){return function(e,n,t){return a(e)?r.cloneElement(e,"function"===typeof t?t(e.props||{}):t):n}(e,e,n)}},1815:function(e,n,t){t.d(n,{q:function(){return o}});var r=t(72791),a=r.createContext(void 0),o=function(e){var n=e.children,t=e.size;return r.createElement(a.Consumer,null,(function(e){return r.createElement(a.Provider,{value:t||e},n)}))};n.Z=a},41818:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(1413);function a(e,n){var t=(0,r.Z)({},e);return Array.isArray(n)&&n.forEach((function(e){delete t[e]})),t}}}]);
//# sourceMappingURL=2.6a061737.chunk.js.map